{"version":3,"sources":["webpack:///./src/components/chat/Chat.vue?4d60","webpack:///src/components/chat/Chat.vue","webpack:///./src/components/chat/Chat.vue?90ec","webpack:///./src/components/chat/Chat.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_l","chat","key","_id","urls","getAwayImg","from","to","domProps","_s","text","nameOfSender","active","on","$event","openNewMessage","staticRenderFns","data","created","socket","emit","methods","first","localStorage","getItem","second","sortArrayByDate","arr","sort","$router","push","component","VBtn","VCard","VDivider","VIcon","VImg","VList","VListItem","VListItemAvatar","VListItemContent","VListItemIcon","VListItemTitle","VSpacer","VSubheader","VToolbar","VToolbarTitle"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,YAAY,UAAUC,MAAM,CAAC,YAAY,QAAQ,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,UAAU,KAAO,KAAK,CAACH,EAAG,kBAAkB,CAACJ,EAAIQ,GAAG,cAAcJ,EAAG,YAAYA,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,SAAS,CAACJ,EAAIQ,GAAG,kBAAkB,IAAI,GAAGJ,EAAG,SAAS,CAACG,MAAM,CAAC,UAAY,KAAK,CAACH,EAAG,cAAc,CAACJ,EAAIQ,GAAG,iBAAiBR,EAAIS,GAAIT,EAAU,QAAE,SAASU,GAAM,OAAON,EAAG,cAAc,CAACO,IAAID,EAAKE,KAAK,CAACR,EAAG,qBAAqB,CAACA,EAAG,QAAQ,CAACG,MAAM,CAAC,IAAMP,EAAIa,KAAM,kBAAoBb,EAAIc,WAAWJ,EAAKK,KAAKH,IAAKF,EAAKM,GAAGJ,KAAO,WAAW,GAAGR,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACa,SAAS,CAAC,YAAcjB,EAAIkB,GAAGR,EAAKS,UAAU,GAAGf,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACa,SAAS,CAAC,YAAcjB,EAAIkB,GAAGlB,EAAIoB,aAAaV,EAAKK,KAAML,EAAKM,SAAS,GAAGZ,EAAG,mBAAmB,CAACA,EAAG,SAAS,CAACG,MAAM,CAAC,MAAQG,EAAKW,OAAS,uBAAyB,QAAQC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOvB,EAAIwB,eAAed,EAAKK,KAAKH,IAAKF,EAAKM,GAAGJ,QAAQ,CAACZ,EAAIQ,GAAG,4BAA4B,IAAI,OAAM,GAAGJ,EAAG,cAAc,IACzlCqB,EAAkB,G,4ECkEtB,GAEEC,KAAF,kBAwBA,mBACQ,MAAR,CAAU,MAAV,iCAEA,UACA,QACA,QACA,MACA,cAEEC,QAnCF,WAmCA,WAEI1B,KAAK2B,OAAOC,KAAK,OAAQ,QAEzB,EAAJ,oCACA,CACM,QAAN,CACQ,cAAR,iCAEA,kBAEM,IADA,IAAN,YACA,2BACQ,EAAR,gBAGM,EAAN,SACM,EAAN,6BAMI,KAAJ,sCACM,IAAN,+BACA,gEACA,4DACA,+DACA,iEACU,EAAV,mBAIM,EAAN,eACM,EAAN,kCACM,EAAN,6BAGI,KAAJ,uCACM,IAAN,+BACA,gEACA,4DACA,+DACA,iEACU,EAAV,mBAIM,EAAN,eACM,EAAN,kCACM,EAAN,8BAIEC,QAAS,CASPhB,WATJ,SASA,KACM,OAAOiB,GAASC,aAAaC,QAAQ,UAAYC,EAASH,GAG5D,aAbJ,SAaA,KACM,OAAIhB,EAAKH,KAAOoB,aAAaC,QAAQ,UAC3C,yBAIe,UAAf,gBAIIE,gBAvBJ,SAuBA,GACMC,EAAIC,MAAK,SAAf,KACQ,IAAR,mBACA,mBACQ,OAAR,QAGIb,eA9BJ,SA8BA,KACA,kCACQvB,KAAKqC,QAAQC,KAAK,CAA1B,4CAEQtC,KAAKqC,QAAQC,KAAK,CAA1B,+CC7L6V,I,yMCOzVC,EAAY,eACd,EACAzC,EACA0B,GACA,EACA,KACA,KACA,MAIa,aAAAe,EAAiB,QAmBhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,QAAA,KAAMC,WAAA,KAASC,QAAA,KAAMC,OAAA,KAAKC,QAAA,KAAMC,YAAA,KAAUC,kBAAA,KAAgBC,iBAAA,OAAiBC,gBAAA,KAAcC,eAAA,OAAeC,UAAA,KAAQC,aAAA,KAAWC,WAAA,KAASC,cAAA","file":"js/chunk-2d20975c.fc335b03.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"500\"}},[_c('v-toolbar',{attrs:{\"color\":\"#1565C0\",\"dark\":\"\"}},[_c('v-toolbar-title',[_vm._v(\"Messages\")]),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\"}},[_c('v-icon',[_vm._v(\"mdi-magnify\")])],1)],1),_c('v-list',{attrs:{\"subheader\":\"\"}},[_c('v-subheader',[_vm._v(\"Recent chat\")]),_vm._l((_vm.recent),function(chat){return _c('v-list-item',{key:chat._id},[_c('v-list-item-avatar',[_c('v-img',{attrs:{\"src\":_vm.urls+ '/profile-image/' + _vm.getAwayImg(chat.from._id, chat.to._id) + '.PNG'}})],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(chat.text)}})],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(_vm.nameOfSender(chat.from, chat.to))}})],1),_c('v-list-item-icon',[_c('v-icon',{attrs:{\"color\":chat.active ? 'deep-purple accent-4' : 'grey'},on:{\"click\":function($event){return _vm.openNewMessage(chat.from._id, chat.to._id)}}},[_vm._v(\" mdi-message-outline \")])],1)],1)})],2),_c('v-divider')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card\n    class=\"mx-auto\"\n    max-width=\"500\"\n  >\n    <v-toolbar\n      color=\"#1565C0\"\n      dark\n    >\n\n      <v-toolbar-title>Messages</v-toolbar-title>\n\n      <v-spacer></v-spacer>\n\n      <v-btn icon>\n        <v-icon>mdi-magnify</v-icon>\n      </v-btn>\n    </v-toolbar>\n\n    <v-list subheader>\n      <v-subheader>Recent chat</v-subheader>\n\n      <v-list-item\n        v-for=\"chat in recent\"\n        :key=\"chat._id\"\n      >\n      \n        <v-list-item-avatar>\n          <!-- <v-img\n            :src=\"'http://localhost:3000/profile-image/' + getAwayImg(chat.from._id, chat.to._id) + '.PNG'\"\n          ></v-img> -->\n          <v-img\n            :src=\"urls+ '/profile-image/' + getAwayImg(chat.from._id, chat.to._id) + '.PNG'\"\n          ></v-img>\n        </v-list-item-avatar>\n\n        <v-list-item-content>\n          <v-list-item-title v-text=\"chat.text\"></v-list-item-title>\n        </v-list-item-content>\n\n\n        <v-list-item-content>\n            <v-list-item-title v-text=\"nameOfSender(chat.from, chat.to)\"></v-list-item-title>\n            \n        </v-list-item-content>\n        \n        <v-list-item-icon>\n          <v-icon :color=\"chat.active ? 'deep-purple accent-4' : 'grey'\" @click=\"openNewMessage(chat.from._id, chat.to._id)\">\n            mdi-message-outline\n          </v-icon>\n        </v-list-item-icon>\n      </v-list-item>\n    </v-list>\n\n    <v-divider></v-divider>\n\n    \n  </v-card>\n</template>\n\n<script>\nimport serverUrl from '../../config'\n// import {mapActions} from 'vuex'\n// import * as types from \"../../store/types\";\nimport axios from 'axios';\nimport io from \"socket.io-client\";\n\nexport default {\n  \n  data:() => ({\n    // recent: [\n    //     {\n    //       active: true,\n    //       avatar: 'https://cdn.vuetifyjs.com/images/lists/1.jpg',\n    //       title: 'Jason Oner',\n    //     },\n    //     {\n    //       active: true,\n    //       avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg',\n    //       title: 'Mike Carlson',\n    //     },\n    //     {\n    //       avatar: 'https://cdn.vuetifyjs.com/images/lists/3.jpg',\n    //       title: 'Cindy Baker',\n    //     },\n    //     {\n    //       avatar: 'https://cdn.vuetifyjs.com/images/lists/4.jpg',\n    //       title: 'Ali Connors',\n    //     },\n    //   ],\n   \n   \n    // socket: io(\"http://localhost:3000\", {\n    socket: io(serverUrl, {\n             query: { token: localStorage.getItem(\"token\") },\n             }),\n    recent: [],\n    name: '', \n    from: '',\n    to: '',\n    urls: serverUrl\n  }),\n  created() {\n    // this.getAllMessage()\n    this.socket.emit('some', 'some')\n    //  axios.get(\"http://localhost:3000/get-all-messages\",\n     axios.get(this.urls + \"/get-all-messages\",\n       {\n        headers: {\n          authorization: localStorage.getItem(\"token\"),\n        },\n      }).then((res) => {\n        var ret = new Array;\n        for(var i = res.data.length-1; i >= 0; i--) {\n          ret.push(res.data[i]);\n         }\n         \n        this.recent = ret\n          this.sortArrayByDate(this.recent)  \n\n        \n      });\n\n\n       this.socket.on(\"new-msg-list\", (msg) => {\n        for (let i = 0; i < this.recent.length; i++) {\n          if ( (this.recent[i].from._id == msg.from._id && this.recent[i].from == msg.from._id) ||\n             (this.recent[i].to._id == msg.to._id && this.recent[i].to._id == msg.to._id) ||\n             (this.recent[i].from_id == msg.to._id && this.recent[i].to._id == msg.from._id) ||\n            (this.recent[i].to._id == msg.from._id && this.recent[i].from._id== msg.to._id) ) {\n              this.recent.splice(i, 1)\n             \n              }\n        }\n         this.recent.push(msg)\n          this.nameOfSender(msg.from._id, msg.to._id) \n        this.sortArrayByDate(this.recent)\n      })\n\n      this.socket.on(\"new-msg-list2\", (msg) => {\n        for (let i = 0; i < this.recent.length; i++) {\n          if ( (this.recent[i].from._id == msg.from._id && this.recent[i].from == msg.from._id) ||\n             (this.recent[i].to._id == msg.to._id && this.recent[i].to._id == msg.to._id) ||\n             (this.recent[i].from_id == msg.to._id && this.recent[i].to._id == msg.from._id) ||\n            (this.recent[i].to._id == msg.from._id && this.recent[i].from._id== msg.to._id) ) {\n              this.recent.splice(i, 1)\n             \n              }\n        }\n         this.recent.push(msg)\n          this.nameOfSender(msg.from._id, msg.to._id) \n        this.sortArrayByDate(this.recent)\n      })\n  },\n\n  methods: {\n  //   ...mapActions({\n  //   getAllMessage: types.GET_ALL_MESSAGES\n  // }),\n    \n    // sendMessage() {\n    //   this.$store.dispatch('socketOnConnection', {msg: 'sosa', id: '5fdf3939a083b610dcf547f9'})\n    // }\n\n    getAwayImg(first, second) {\n      return first == localStorage.getItem('userID') ? second : first\n    },\n    \n      nameOfSender(from, to) {\n      if (from._id == localStorage.getItem('userID')) {\n         return `you -> ${to.name}`\n       \n        \n      } else {\n        return `You <- ${from.name}`\n      }\n    }, \n\n    sortArrayByDate(arr) {\n      arr.sort(function(a, b) {\n            var c = new Date(a.date);\n            var d = new Date(b.date);\n            return d -c ;\n        });   \n    },\n    openNewMessage(firstId, secondId) {\n      if(localStorage.getItem('userID') == secondId) {\n        this.$router.push({name:'private-chat', params: {receiverID: firstId}})\n      } else {\n        this.$router.push({name:'private-chat', params: {receiverID: secondId}})\n      }\n      \n    }\n  }\n\n\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=211645f5&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VDivider,VIcon,VImg,VList,VListItem,VListItemAvatar,VListItemContent,VListItemIcon,VListItemTitle,VSpacer,VSubheader,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}