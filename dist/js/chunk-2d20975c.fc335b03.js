(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20975c"],{a8c2:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"500"}},[r("v-toolbar",{attrs:{color:"#1565C0",dark:""}},[r("v-toolbar-title",[t._v("Messages")]),r("v-spacer"),r("v-btn",{attrs:{icon:""}},[r("v-icon",[t._v("mdi-magnify")])],1)],1),r("v-list",{attrs:{subheader:""}},[r("v-subheader",[t._v("Recent chat")]),t._l(t.recent,(function(e){return r("v-list-item",{key:e._id},[r("v-list-item-avatar",[r("v-img",{attrs:{src:t.urls+"/profile-image/"+t.getAwayImg(e.from._id,e.to._id)+".PNG"}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:t._s(t.nameOfSender(e.from,e.to))}})],1),r("v-list-item-icon",[r("v-icon",{attrs:{color:e.active?"deep-purple accent-4":"grey"},on:{click:function(r){return t.openNewMessage(e.from._id,e.to._id)}}},[t._v(" mdi-message-outline ")])],1)],1)}))],2),r("v-divider")],1)},a=[],n=(r("a434"),r("b0c0"),r("db49")),i=r("bc3a"),c=r.n(i),s=r("8055"),d=r.n(s),m={data:function(){return{socket:d()(n["a"],{query:{token:localStorage.getItem("token")}}),recent:[],name:"",from:"",to:"",urls:n["a"]}},created:function(){var t=this;this.socket.emit("some","some"),c.a.get(this.urls+"/get-all-messages",{headers:{authorization:localStorage.getItem("token")}}).then((function(e){for(var r=new Array,o=e.data.length-1;o>=0;o--)r.push(e.data[o]);t.recent=r,t.sortArrayByDate(t.recent)})),this.socket.on("new-msg-list",(function(e){for(var r=0;r<t.recent.length;r++)(t.recent[r].from._id==e.from._id&&t.recent[r].from==e.from._id||t.recent[r].to._id==e.to._id&&t.recent[r].to._id==e.to._id||t.recent[r].from_id==e.to._id&&t.recent[r].to._id==e.from._id||t.recent[r].to._id==e.from._id&&t.recent[r].from._id==e.to._id)&&t.recent.splice(r,1);t.recent.push(e),t.nameOfSender(e.from._id,e.to._id),t.sortArrayByDate(t.recent)})),this.socket.on("new-msg-list2",(function(e){for(var r=0;r<t.recent.length;r++)(t.recent[r].from._id==e.from._id&&t.recent[r].from==e.from._id||t.recent[r].to._id==e.to._id&&t.recent[r].to._id==e.to._id||t.recent[r].from_id==e.to._id&&t.recent[r].to._id==e.from._id||t.recent[r].to._id==e.from._id&&t.recent[r].from._id==e.to._id)&&t.recent.splice(r,1);t.recent.push(e),t.nameOfSender(e.from._id,e.to._id),t.sortArrayByDate(t.recent)}))},methods:{getAwayImg:function(t,e){return t==localStorage.getItem("userID")?e:t},nameOfSender:function(t,e){return t._id==localStorage.getItem("userID")?"you -> ".concat(e.name):"You <- ".concat(t.name)},sortArrayByDate:function(t){t.sort((function(t,e){var r=new Date(t.date),o=new Date(e.date);return o-r}))},openNewMessage:function(t,e){localStorage.getItem("userID")==e?this.$router.push({name:"private-chat",params:{receiverID:t}}):this.$router.push({name:"private-chat",params:{receiverID:e}})}}},l=m,u=r("2877"),f=r("6544"),_=r.n(f),v=r("8336"),g=r("b0af"),h=r("ce7e"),p=r("132d"),I=r("adda"),b=r("8860"),w=r("da13"),y=r("8270"),V=r("5d23"),k=r("34c3"),D=r("2fa4"),S=r("e0c7"),A=r("71d9"),x=r("2a7f"),C=Object(u["a"])(l,o,a,!1,null,null,null);e["default"]=C.exports;_()(C,{VBtn:v["a"],VCard:g["a"],VDivider:h["a"],VIcon:p["a"],VImg:I["a"],VList:b["a"],VListItem:w["a"],VListItemAvatar:y["a"],VListItemContent:V["a"],VListItemIcon:k["a"],VListItemTitle:V["b"],VSpacer:D["a"],VSubheader:S["a"],VToolbar:A["a"],VToolbarTitle:x["a"]})}}]);
//# sourceMappingURL=chunk-2d20975c.fc335b03.js.map