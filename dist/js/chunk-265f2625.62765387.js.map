{"version":3,"sources":["webpack:///./src/components/chat/ChatOneToOne.vue?a6af","webpack:///./src/components/chat/ChatOneToOne.vue?ff84","webpack:///src/components/chat/ChatOneToOne.vue","webpack:///./src/components/chat/ChatOneToOne.vue?7b55","webpack:///./src/components/chat/ChatOneToOne.vue?8e2f","webpack:///../../../src/components/VForm/VForm.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","receiverId","urls","$route","params","receiverID","_v","_s","receiverName","ref","_l","message","index","key","_id","class","author","status","deletearray","length","on","$event","toggleVisibilityButtons","body","_e","visibleButtons","deleteRestoreMessage","includes","userID","preventDefault","sendMessage","model","value","callback","$$v","bobMessage","expression","staticRenderFns","methods","console","log","$nextTick","windowWidth2","window","innerWidth","$set","messages","headers","authorization","localStorage","getItem","res","data","success","messageToUpdate","push","getChatMessage","types","computed","getMessages","watch","txt","created","$router","mounted","addEventListener","updated","socket","emit","destroyed","component","VAvatar","VBtn","VCol","VContainer","VForm","VIcon","VImg","VRow","VTextField","name","provide","form","inheritAttrs","props","disabled","lazyValidation","readonly","Boolean","inputs","watchers","errorBag","handler","errors","Object","deep","immediate","watchInput","watcher","input","val","_uid","valid","shouldValidate","validate","filter","reset","resetErrorBag","setTimeout","resetValidation","register","unregister","found","find","i","unwatch","h","novalidate","attrs$","submit","e","$slots"],"mappings":"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","file":"js/chunk-265f2625.62765387.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOneToOne.vue?vue&type=style&index=0&id=fdd7ed70&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOneToOne.vue?vue&type=style&index=0&id=fdd7ed70&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-container\"},[_c('v-container',{staticClass:\"chat-wrapper\"},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{staticClass:\"pa-2\",attrs:{\"cols\":\"12\"}},[_c('div',{staticClass:\"chat-header\"},[_c('router-link',{staticClass:\"user-link\",attrs:{\"to\":'/user/' + _vm.receiverId}},[_c('v-avatar',{staticClass:\"mr-2\",attrs:{\"size\":\"40\"}},[_c('v-img',{attrs:{\"src\":_vm.urls + '/profile-image/' + _vm.$route.params.receiverID + '.PNG' || _vm.urls + '/profile-image/' + 'avatar' + '.PNG'}})],1),_c('h1',{staticClass:\"head\"},[_vm._v(_vm._s(_vm.receiverName))])],1),_c('v-btn',{staticClass:\"encryption-btn\",attrs:{\"icon\":\"\",\"to\":'/encr-private-chat/'+ _vm.$route.params.receiverID,\"title\":\"End-to-End Encryption\"}},[_c('v-icon',[_vm._v(\"mdi-lock\")])],1)],1),_c('main',{staticClass:\"chat-main\"},[_c('section',{ref:\"chatArea\",staticClass:\"chat-area\"},[_c('div',{staticClass:\"messages-container\"},_vm._l((_vm.messages),function(message,index){return _c('div',{key:message._id,class:{\n                  'message-container': true,\n                  'outgoing': message.author === 'you',\n                  'incoming': message.author !== 'you'\n                }},[_c('div',{staticClass:\"message-bubble\",class:{ \n                    'outgoing': message.author === 'you',\n                    'incoming': message.author !== 'you',\n                    'seen': message.status === 'seen',\n                    'sent': message.status === 'sent',\n                    'deleted': message.deletearray.length > 0\n                  },on:{\"click\":function($event){return _vm.toggleVisibilityButtons(index)}}},[_vm._v(\" \"+_vm._s(message.body)+\" \"),_c('div',{staticClass:\"message-meta\"},[_c('span',{staticClass:\"time\"}),(message.author != 'you')?_c('v-icon',{attrs:{\"small\":\"\",\"color\":message.status === 'seen' ? 'blue' : 'grey'}},[_vm._v(\" \"+_vm._s(message.status === 'seen' ? 'mdi-check-all' : 'mdi-check')+\" \")]):_vm._e()],1)]),(_vm.visibleButtons[index])?_c('div',{staticClass:\"message-actions\"},[_c('v-btn',{attrs:{\"icon\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteRestoreMessage(message._id, index)}}},[_c('v-icon',{attrs:{\"color\":message.deletearray.includes(_vm.userID) ? 'blue' : \n                             (message.deletearray.length > 0 ? 'red' : 'blue')}},[_vm._v(\" \"+_vm._s(message.deletearray.includes(_vm.userID) ? 'mdi-restore' : 'mdi-delete')+\" \")])],1)],1):_vm._e()])}),0)]),_c('section',{staticClass:\"message-input\"},[_c('v-form',{staticClass:\"input-form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.sendMessage($event)}}},[_c('v-text-field',{staticClass:\"message-field\",attrs:{\"placeholder\":\"Type your message...\",\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\",\"append-icon\":\"mdi-send\"},on:{\"click:append\":_vm.sendMessage},model:{value:(_vm.bobMessage),callback:function ($$v) {_vm.bobMessage=$$v},expression:\"bobMessage\"}})],1)],1)])])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"chat-container\">\r\n    <v-container class=\"chat-wrapper\">\r\n      <v-row no-gutters>\r\n        <v-col cols=\"12\" class=\"pa-2\">\r\n          <!-- Header with user info -->\r\n          <div class=\"chat-header\">\r\n            <router-link :to=\"'/user/' + receiverId\" class=\"user-link\">\r\n              <v-avatar size=\"40\" class=\"mr-2\">\r\n                <!-- <v-img :src=\"receiverAvatar || 'https://cdn.vuetifyjs.com/images/john.jpg'\"></v-img> -->\r\n                <v-img :src=\"urls + '/profile-image/' + $route.params.receiverID + '.PNG' || urls + '/profile-image/' + 'avatar' + '.PNG'\"></v-img>\r\n              </v-avatar>\r\n              <h1 class=\"head\">{{receiverName}}</h1>\r\n            </router-link>\r\n            <v-btn \r\n              icon\r\n              :to=\"'/encr-private-chat/'+ $route.params.receiverID\"\r\n              class=\"encryption-btn\"\r\n              title=\"End-to-End Encryption\"\r\n            >\r\n              <v-icon>mdi-lock</v-icon>\r\n            </v-btn>\r\n          </div>\r\n\r\n          <!-- Chat messages area -->\r\n          <main class=\"chat-main\">\r\n            <section ref=\"chatArea\" class=\"chat-area\">\r\n              <div class=\"messages-container\">\r\n                <div \r\n                  v-for=\"(message, index) in messages\" \r\n                  :key=\"message._id\"\r\n                  :class=\"{\r\n                    'message-container': true,\r\n                    'outgoing': message.author === 'you',\r\n                    'incoming': message.author !== 'you'\r\n                  }\"\r\n                >\r\n                  <!-- Message bubble -->\r\n                  <div \r\n                  @click=\"toggleVisibilityButtons(index)\"\r\n                    class=\"message-bubble\"\r\n                    :class=\"{ \r\n                      'outgoing': message.author === 'you',\r\n                      'incoming': message.author !== 'you',\r\n                      'seen': message.status === 'seen',\r\n                      'sent': message.status === 'sent',\r\n                      'deleted': message.deletearray.length > 0\r\n                    }\"\r\n                    \r\n                  >\r\n                    {{ message.body }}\r\n                    \r\n                    <!-- Message status and time -->\r\n                    <div class=\"message-meta\"\r\n                    >\r\n                      <span class=\"time\"></span>\r\n                      <v-icon \r\n                        v-if=\"message.author != 'you'\" \r\n                        small\r\n                        :color=\"message.status === 'seen' ? 'blue' : 'grey'\"\r\n                      >\r\n                        {{ message.status === 'seen' ? 'mdi-check-all' : 'mdi-check' }}\r\n                      </v-icon>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <!-- Message actions -->\r\n                  <div \r\n                    v-if=\"visibleButtons[index]\" \r\n                    class=\"message-actions\"\r\n                  >\r\n                    <v-btn \r\n                      icon \r\n                      small\r\n                      @click=\"deleteRestoreMessage(message._id, index)\"\r\n                    >\r\n                      <v-icon \r\n                        :color=\"message.deletearray.includes(userID) ? 'blue' : \r\n                               (message.deletearray.length > 0 ? 'red' : 'blue')\"\r\n                      >\r\n                        {{ message.deletearray.includes(userID) ? 'mdi-restore' : 'mdi-delete' }}\r\n                      </v-icon>\r\n                    </v-btn>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </section>\r\n\r\n            <!-- Message input -->\r\n            <section class=\"message-input\">\r\n              <v-form @submit.prevent=\"sendMessage\" class=\"input-form\">\r\n                <v-text-field\r\n                  v-model=\"bobMessage\"\r\n                  placeholder=\"Type your message...\"\r\n                  outlined\r\n                  dense\r\n                  hide-details\r\n                  append-icon=\"mdi-send\"\r\n                  @click:append=\"sendMessage\"\r\n                  class=\"message-field\"\r\n                ></v-text-field>\r\n              </v-form>\r\n            </section>\r\n          </main>\r\n        </v-col>\r\n      </v-row>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n<script>\r\nimport serverUrl from '../../config'\r\nimport io from \"socket.io-client\";\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport * as types from \"../../store/types\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            // socket: io(\"http://localhost:3000\", {\r\n            socket: io(serverUrl, {\r\n             query: { token: localStorage.getItem(\"token\") },\r\n             }),\r\n        bobMessage: '',\r\n        youMessage: '',\r\n        receiverName: '',\r\n        receiverId: this.$route.params.receiverID,\r\n        messages: [\r\n        // {\r\n        //     body: 'Welcome to the chat, I\\'m Bob!',\r\n        //     author: 'bob'\r\n        // },\r\n        // {\r\n        //     body: 'Thank you Bob',\r\n        //     author: 'you'\r\n        // },\r\n        // {\r\n        //     body: 'You\\'re most welcome',\r\n        //     author: 'bob'\r\n        // }\r\n        ],\r\n        windowWidth2: window.innerWidth,\r\n        visibleButtons: [],\r\n        userID: localStorage.getItem('userID'),\r\n        urls: serverUrl\r\n  }\r\n},\r\nmethods: {\r\n  //   sendMessage(direction) {\r\n  //     if (!this.youMessage && !this.bobMessage) {\r\n  //       return\r\n  //     }\r\n  //     if (direction === 'out') {\r\n  //       this.messages.push({body: this.youMessage, author: 'you'})\r\n  //       this.youMessage = ''\r\n  //     } else if (direction === 'in') {\r\n  //       this.messages.push({body: this.bobMessage, author: 'bob'})\r\n  //       this.bobMessage = ''\r\n  //     } else {\r\n  //       alert('something went wrong')\r\n  //     }\r\n  //     this.nextTick(() => {\r\n  //       let messageDisplay = this.$refs.chatArea\r\n  //       messageDisplay.scrollTop = messageDisplay.scrollHeight\r\n  //     })\r\n  // },\r\n    sendMessage() {\r\n      // if (!this.youMessage && !this.bobMessage) {\r\n      //   return\r\n      // }\r\n      // if (direction === 'out') {\r\n      //   this.messages.push({body: this.youMessage, author: 'you'})\r\n      //   this.youMessage = ''\r\n      // } else if (direction === 'in') {\r\n      //   this.messages.push({body: this.bobMessage, author: 'bob'})\r\n      //   this.bobMessage = ''\r\n      // } else {\r\n      //   alert('something went wrong')\r\n      // }\r\n      try {\r\n        // this.messages.push({body: this.bobMessage, author: 'bob', deletearray: []})\r\n      \r\n      this.$store.dispatch('socketOnConnection', {msg: this.bobMessage, id: this.$route.params.receiverID})\r\n      this.$store.dispatch(\"getUserSearchPic\", this.$route.params.id);\r\n      } catch (error) {\r\n        console.log('the error heree')\r\n      }\r\n      // this.nextTick(() => {\r\n      //   let messageDisplay = this.$refs.chatArea\r\n      //   messageDisplay.scrollTop = messageDisplay.scrollHeight\r\n      // })\r\n      this.$nextTick(() => {\r\n     document.getElementsByClassName('chat-area')[0].scrollTop ;                      \r\n  })\r\n  },\r\n  onResize() {\r\n      console.log(\"App.vue-onResize()\", this.windowWidth2);\r\n      this.windowWidth2 = window.innerWidth;\r\n       \r\n    },\r\n    toggleVisibilityButtons(index) {\r\n      \r\n      this.$set(this.visibleButtons, index, !this.visibleButtons[index])\r\n      console.log(this.visibleButtons)\r\n      console.log(this.messages[index])\r\n      // console.log(this.messages[index])\r\n    },\r\n    deleteRestoreMessage(id, index) {\r\n    console.log('message id is: ', id)\r\n    // axios.post(\"http://localhost:3000/chat-message/delete-msg\",\r\n    axios.post(this.urls +\"/chat-message/delete-msg\",\r\n    {id: id ,receiverID: this.$route.params.receiverID},\r\n       {\r\n        headers: {\r\n          authorization: localStorage.getItem(\"token\"),\r\n        },\r\n      }).then((res) => {\r\n       \r\n        if (res.data.success) {\r\n          console.log('eee', res)\r\n          if (res.data.message == \"message confirm delete\") {\r\n            this.messages.splice(index, 1)\r\n            this.visibleButtons.splice(index, 1)\r\n          }\r\n          if (res.data.message == 'message delete request') {\r\n            const messageToUpdate = this.messages.find(m => m._id === id);\r\n            if (messageToUpdate) {\r\n              messageToUpdate.deletearray.push(localStorage.getItem('userID'));\r\n            }\r\n          }\r\n          if (res.data.message == 'message restore') {\r\n            const messageToUpdate = this.messages.find(m => m._id === id);\r\n            if (messageToUpdate) {\r\n              messageToUpdate.deletearray = [];\r\n            }\r\n          }\r\n        }\r\n        console.log(res)\r\n      })\r\n  },\r\n  ...mapActions({\r\n    getChatMessage: types.GET_CHAT_MESSAGES\r\n  })\r\n},\r\ncomputed: {\r\n  ...mapGetters({\r\n    getMessages: types.GET_CHAT_MESSAGES\r\n  })\r\n},\r\nwatch: {\r\n    windowWidth2(oldWidth, newWidth) {\r\n      var  txt = `it changed to ${newWidth} from ${oldWidth}`;\r\n      console.log('sxxx', txt)\r\n    },\r\n  },\r\ncreated() {\r\n  // this.getChatMessage(this.$route.params.receiverID).then(() => {\r\n  //   const msgs = this.getMessages;\r\n  //   console.log('222', msgs)\r\n  // })\r\n  \r\n\r\n      // axios.get(\"http://localhost:3000/chat-message/\" + this.$route.params.receiverID,\r\n      axios.get(this.urls +\"/chat-message/\" + this.$route.params.receiverID,\r\n       {\r\n        headers: {\r\n          authorization: localStorage.getItem(\"token\"),\r\n        },\r\n      }).then((res) => {\r\n        console.log('msgd22', res.data)\r\n        var msgs = res.data;\r\n        msgs.map((m) => {\r\n          if (m.from == localStorage.getItem('userID')) {\r\n            console.log('0000', localStorage.getItem('userID'), '0000', m.from )\r\n            this.messages.push({body: m.text, author: 'bob', _id: m._id, deletearray: m.delete, status: m.status})\r\n            this.$nextTick(() => {\r\n              document.getElementsByClassName('chat-area')[0].scrollTop = '1111111111111111111111111111';                      \r\n              }) \r\n            return {\r\n              body: m.text,\r\n              author: 'bob'\r\n            }\r\n          } else {\r\n             this.messages.push({body: m.text, author: 'you', _id: m._id, deletearray: m.delete, status: m.status})\r\n            \r\n           return {\r\n              body: m.text,\r\n              author: 'you'\r\n            }\r\n          }\r\n        })\r\n        console.log('444', this.messages)\r\n      })\r\n  \r\n  this.socket.on('msg', (msg) => {\r\n    if (msg.senderId ==  localStorage.getItem('userID')) {\r\n       console.log('ChatOneToOne new message 2026', msg)\r\n       this.messages.push({body: msg.msg, author: 'bob', deletearray: msg.delete, _id: msg._id, status: msg.status})\r\n       this.$nextTick(() => {\r\n              document.getElementsByClassName('chat-area')[0].scrollTop = '1111111111111111111111111111';                      \r\n        })\r\n    }\r\n   \r\n    else if (msg.senderId ==  this.$route.params.receiverID ) {\r\n      \r\n       {\r\n        console.log('ChatOneToOne new message 2025', msg)\r\n      this.messages.push({body: msg.msg, author: 'you', deletearray: msg.delete, _id: msg._id, status: msg.status})\r\n       this.$nextTick(() => {\r\n              document.getElementsByClassName('chat-area')[0].scrollTop = '1111111111111111111111111111';                      \r\n        }) \r\n      }\r\n    } \r\n   \r\n  })\r\nthis.socket.emit('current-url', this.$route.params.receiverID)\r\n  // socket for delete mesage request\r\n  this.socket.on('message_deleted_request', (msg) => {\r\n    console.log('message_deleted_request', msg)\r\n    const messageToUpdate = this.messages.find(m => m._id === msg.messageId);\r\n    if (messageToUpdate) {\r\n      messageToUpdate.deletearray.push(this.$route.params.receiverID);\r\n    }\r\n  })\r\n  //\r\n  // socket for delete mesage permantly\r\nthis.socket.on('message_restore', (msg) => {\r\n    console.log('message_restore', msg)\r\n    const messageToUpdate = this.messages.find(m => m._id === msg.messageId);\r\n    if (messageToUpdate) {\r\n      messageToUpdate.deletearray = [];\r\n    }\r\n  })\r\n  //\r\n// socket for delete mesage permantly\r\nthis.socket.on('message_delete_permenant', (msg) => {\r\n    console.log('message_deleted_permanent', msg)\r\n    this.messages = this.messages.filter(function (item) {\r\n      return item._id !== msg.messageId\r\n    })\r\n  })\r\n  //\r\n\r\n  //  message seen\r\n  this.socket.on('message-seen', (rec) => {\r\n    console.log('new sseenn', rec)\r\n    if (rec == this.$route.params.receiverID) {\r\n      const arryChatLength = this.messages.length -1;\r\n            console.log('seen message all: ', rec, 'arryChatLength: ', arryChatLength);\r\n\r\n      for(let o = arryChatLength; o >= 0; o--) {\r\n        console.log('oooooooooooooo', o)\r\n        if (this.messages[o].status == 'seen') {\r\n          console.log('eeeeerrrrrrr');\r\n        } else {\r\n          this.messages[o].status = 'seen'\r\n        }\r\n      }\r\n    }\r\n  })\r\n\r\n\r\n  // axios.post('http://localhost:3000/users/get-name-chat', \r\n  axios.post(this.urls +'/users/get-name-chat', \r\n  {id: this.$route.params.receiverID },\r\n  {\r\n        headers: {\r\n          authorization: localStorage.getItem(\"token\"),\r\n        }\r\n  }).then(res => {\r\n    this.receiverName = res.data.name\r\n  })\r\n\r\n  if (this.$route.params.receiverID == localStorage.getItem('userID')) {\r\n      this.$router.push('/')\r\n  }\r\n\r\n  // axios.post(\"http://localhost:3000/get-all-messages/read-message\", \r\n  axios.post(this.urls + \"/get-all-messages/read-message\", \r\n          {receiverId: this.$route.params.receiverID }, {\r\n            headers: { authorization: localStorage.getItem(\"token\") },\r\n          })\r\n          .then((res) => {\r\n            \r\n            this.socket.emit(\"new-post\", res);\r\n          });\r\n\r\n          this.socket.emit('some', 'some')\r\n\r\n    //  see all message\r\n\r\n    // axios.post(\"http://localhost:3000/seen/see-all-message\",\r\n    axios.post(this.urls + \"/seen/see-all-message\",\r\n      { senderId:  this.$route.params.receiverID},\r\n      {\r\n        headers: {\r\n          authorization: localStorage.getItem(\"token\"),\r\n        },\r\n      }).then((res) => { \r\n        console.log('seen result', res)\r\n      })\r\n  }, \r\n\r\n\r\n\r\nmounted() {\r\n  this.socket.emit('current-url', this.$route.params.receiverID)\r\n    this.$nextTick(() => {\r\n      window.addEventListener(\"resize\", this.onResize);\r\n       this.socket.emit('current-url', this.$route.params.receiverID)\r\n    });\r\n  },\r\n  updated() {\r\n    this.socket.emit('current-url', this.$route.params.receiverID)\r\n  },\r\ndestroyed() {\r\n this.messages = []\r\n this.$store.dispatch(types.RESET_CHAT_MESSAGES)\r\n this.socket.emit('current-url', null)\r\n window.removeEventListener(\"resize\", this.onResize);\r\n}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.chat-wrapper {\r\n  max-width: 800px;\r\n  height: 100%;\r\n  padding: 0;\r\n}\r\n\r\n.chat-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 10px 16px;\r\n  background-color: white;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 2;\r\n}\r\n\r\n.user-link {\r\n  display: flex;\r\n  align-items: center;\r\n  text-decoration: none;\r\n  color: inherit;\r\n}\r\n\r\n.head {\r\n  font-size: 1.2rem;\r\n  font-weight: 500;\r\n  margin: 0;\r\n}\r\n\r\n.chat-main {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: calc(100vh - 120px);\r\n}\r\n\r\n.chat-area {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 16px;\r\n  background-color: #e5ddd5;\r\n  /* background-image: url('https://web.whatsapp.com/img/bg-chat-tile-light_a4be512e7195b6b733d9110b408f075d.png'); */\r\n}\r\n\r\n.messages-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.message-container {\r\n  display: flex;\r\n  max-width: 70%;\r\n}\r\n\r\n.message-container.outgoing {\r\n  align-self: flex-end;\r\n  flex-direction: row-reverse;\r\n}\r\n\r\n.message-container.incoming {\r\n  align-self: flex-start;\r\n}\r\n\r\n.message-bubble {\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  position: relative;\r\n  word-wrap: break-word;\r\n  box-shadow: 0 1px 1px rgba(0,0,0,0.1);\r\n}\r\n\r\n.message-bubble.outgoing {\r\n  background-color: #dcf8c6;\r\n  border-top-right-radius: 0;\r\n  margin-left: 20px;\r\n}\r\n\r\n.message-bubble.incoming {\r\n  background-color: white;\r\n  border-top-left-radius: 0;\r\n  margin-right: 20px;\r\n}\r\n\r\n.message-bubble.deleted {\r\n  background-color: #ffcdd2 !important;\r\n  color: #d32f2f !important;\r\n}\r\n\r\n.message-bubble.sent {\r\n  background-color: #e3f2fd;\r\n}\r\n\r\n.message-meta {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  margin-top: 4px;\r\n  font-size: 0.7rem;\r\n  color: rgba(0,0,0,0.6);\r\n}\r\n\r\n.time {\r\n  margin-right: 4px;\r\n}\r\n\r\n.message-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 8px;\r\n}\r\n\r\n.message-input {\r\n  padding: 8px 16px;\r\n  background-color: white;\r\n  position: sticky;\r\n  bottom: 0;\r\n}\r\n\r\n.input-form {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.message-field {\r\n  background-color: white;\r\n  border-radius: 20px;\r\n}\r\n\r\n.encryption-btn {\r\n  margin-left: auto;\r\n}\r\n\r\n/* Scrollbar styling */\r\n.chat-area::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.chat-area::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n}\r\n\r\n.chat-area::-webkit-scrollbar-thumb {\r\n  background: #888;\r\n  border-radius: 3px;\r\n}\r\n\r\n.chat-area::-webkit-scrollbar-thumb:hover {\r\n  background: #555;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOneToOne.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOneToOne.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatOneToOne.vue?vue&type=template&id=fdd7ed70&scoped=true&\"\nimport script from \"./ChatOneToOne.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatOneToOne.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatOneToOne.vue?vue&type=style&index=0&id=fdd7ed70&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fdd7ed70\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAvatar,VBtn,VCol,VContainer,VForm,VIcon,VImg,VRow,VTextField})\n","// Components\nimport VInput from '../VInput/VInput'\n\n// Mixins\nimport mixins from '../../util/mixins'\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport { provide as RegistrableProvide } from '../../mixins/registrable'\n\n// Helpers\nimport { VNode } from 'vue'\n\ntype ErrorBag = Record<number, boolean>\ntype VInputInstance = InstanceType<typeof VInput>\ntype Watchers = {\n  _uid: number\n  valid: () => void\n  shouldValidate: () => void\n}\n\n/* @vue/component */\nexport default mixins(\n  BindsAttrs,\n  RegistrableProvide('form')\n  /* @vue/component */\n).extend({\n  name: 'v-form',\n\n  provide (): object {\n    return { form: this }\n  },\n\n  inheritAttrs: false,\n\n  props: {\n    disabled: Boolean,\n    lazyValidation: Boolean,\n    readonly: Boolean,\n    value: Boolean,\n  },\n\n  data: () => ({\n    inputs: [] as VInputInstance[],\n    watchers: [] as Watchers[],\n    errorBag: {} as ErrorBag,\n  }),\n\n  watch: {\n    errorBag: {\n      handler (val) {\n        const errors = Object.values(val).includes(true)\n\n        this.$emit('input', !errors)\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n\n  methods: {\n    watchInput (input: any): Watchers {\n      const watcher = (input: any): (() => void) => {\n        return input.$watch('hasError', (val: boolean) => {\n          this.$set(this.errorBag, input._uid, val)\n        }, { immediate: true })\n      }\n\n      const watchers: Watchers = {\n        _uid: input._uid,\n        valid: () => {},\n        shouldValidate: () => {},\n      }\n\n      if (this.lazyValidation) {\n        // Only start watching inputs if we need to\n        watchers.shouldValidate = input.$watch('shouldValidate', (val: boolean) => {\n          if (!val) return\n\n          // Only watch if we're not already doing it\n          if (this.errorBag.hasOwnProperty(input._uid)) return\n\n          watchers.valid = watcher(input)\n        })\n      } else {\n        watchers.valid = watcher(input)\n      }\n\n      return watchers\n    },\n    /** @public */\n    validate (): boolean {\n      return this.inputs.filter(input => !input.validate(true)).length === 0\n    },\n    /** @public */\n    reset (): void {\n      this.inputs.forEach(input => input.reset())\n      this.resetErrorBag()\n    },\n    resetErrorBag () {\n      if (this.lazyValidation) {\n        // Account for timeout in validatable\n        setTimeout(() => {\n          this.errorBag = {}\n        }, 0)\n      }\n    },\n    /** @public */\n    resetValidation () {\n      this.inputs.forEach(input => input.resetValidation())\n      this.resetErrorBag()\n    },\n    register (input: VInputInstance) {\n      this.inputs.push(input)\n      this.watchers.push(this.watchInput(input))\n    },\n    unregister (input: VInputInstance) {\n      const found = this.inputs.find(i => i._uid === input._uid)\n\n      if (!found) return\n\n      const unwatch = this.watchers.find(i => i._uid === found._uid)\n      if (unwatch) {\n        unwatch.valid()\n        unwatch.shouldValidate()\n      }\n\n      this.watchers = this.watchers.filter(i => i._uid !== found._uid)\n      this.inputs = this.inputs.filter(i => i._uid !== found._uid)\n      this.$delete(this.errorBag, found._uid)\n    },\n  },\n\n  render (h): VNode {\n    return h('form', {\n      staticClass: 'v-form',\n      attrs: {\n        novalidate: true,\n        ...this.attrs$,\n      },\n      on: {\n        submit: (e: Event) => this.$emit('submit', e),\n      },\n    }, this.$slots.default)\n  },\n})\n"],"sourceRoot":""}